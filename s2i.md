# Steps to S2I to a .NetCore application

Used image: https://catalog.redhat.com/software/containers/dotnet/dotnet-31-rhel7/5ddc18f6dd19c71643b57964?container-tabs=gti&gti-tabs=registry-tokens
API creation steps: https://docs.microsoft.com/en-us/aspnet/core/tutorials/first-web-api?view=aspnetcore-3.1&tabs=visual-studio

## Login and new project
```
oc login https://openshift.detrandf.lab.rdu2.cee.redhat.com:443
oc new-project netcore-s2i-poc --display-name=".Net Core s2i POC"
```

## S2I
oc new-build --name=todo-api --image-stream=dotnet-31-rhel7:latest --binary -n netcore-s2i-poc
oc start-build todo-api --from-dir=bin/Debug/netcoreapp3.1/ --wait --follow -n netcore-s2i-poc

## New app, service and route
oc new-app --name="todo-api" --image-stream=todo-api -n netcore-s2i-poc
oc expose svc/todo-api -n netcore-s2i-poc

## Template creation
oc get dc/todo-api --export -o yaml -n netcore-s2i-poc > ocp/dc.yaml
oc get svc/todo-api --export -o yaml -n netcore-s2i-poc > ocp/svc.yaml
oc get route/todo-api --export -o yaml -n netcore-s2i-poc > ocp/route.yaml
oc create -f ocp/dotnet-31-rhel7-template.yaml -n netcore-s2i-poc

## Application created by template

In case this option is executed delete the DeploymentConfig, Service and Route generated by the __New app, service and route__ subsection.

oc new-app --template=dotnet-31-rhel7-template -n netcore-s2i-poc -p=APPLICATION_NAME=todo-api -p=PROJECT_NAME=netcore-s2i-poc -p=REPLICAS_COUNT=2
