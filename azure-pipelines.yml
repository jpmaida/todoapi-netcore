# Starter pipeline

trigger:
- master

pool:
  vmImage: 'ubuntu-latest'

steps:
- task: CmdLine@2
  inputs:
    script: |
      pwd
      ls -l
- task: OcConditionalCmd@2
  inputs:
    connectionType: 'OpenShift Connection Service'
    openshiftService: 'openshift-3.11-opentlc'
    version: 'v3.11.0'
    cmd: 'oc get buildconfigs -n netcore-s2i-poc'
    condition: 'exists'
    resource: 'buildconfigs/xxx'
- task: oc-cmd@2
  displayName: 'Start OCP build'
  inputs:
    connectionType: 'OpenShift Connection Service'
    openshiftService: 'openshift-3.11-opentlc'
    version: 'v3.11.0'
    cmd: 'oc start-build todo-api --from-dir=TodoAPI-NetCore/bin/Debug/netcoreapp3.1/ --wait --follow -n netcore-s2i-poc'
